IF OBJECT_ID('STAGE_CDI.CRM_PLAT_DYN_TRANSFEROUT_STG') IS NOT NULL
  DROP TABLE STAGE_CDI.CRM_PLAT_DYN_TRANSFEROUT_STG;

CREATE TABLE STAGE_CDI.CRM_PLAT_DYN_TRANSFEROUT_STG
(
  S_TRANSFEROUTACTVTY_KEY                    DECIMAL(38,0)    NOT NULL    IDENTITY(1,1),
  S_CREATE_DATETIME                          DATETIME2        NOT NULL,
  S_UPDATE_DATETIME                          DATETIME2        NOT NULL,
  ACTIVITYID                                 VARCHAR(255)     NOT NULL,
  ASC_REFERENCE                              VARCHAR(255)     NOT NULL,
  SUBJECT                                    VARCHAR(200),
  REGARDINGOBJECTID                          VARCHAR(255),
  REGARDINGOBJECTIDNAME                      VARCHAR(255),
  ASC_CASHTRANSFER                           DECIMAL(10,0),
  OWNERID                                    VARCHAR(255),
  OWNERIDNAME                                VARCHAR(160),
  ASC_TRANSFERTYPE                           DECIMAL(10,0),
  ASC_CLIENTMASTER                           VARCHAR(255),
  ASC_CLIENTMASTERNAME                       VARCHAR(255),
  ASC_SUBPROCESS                             DECIMAL(10,0),
  ASC_TITLE                                  VARCHAR(100),
  ASC_NUMBEROFTRANSFERS                      DECIMAL(10,0),
  ASC_RAISEDBY                               VARCHAR(255),
  ASC_PARENTTRANSFER                         VARCHAR(255),
  ASC_BROKER                                 VARCHAR(255),
  PRIORITYCODE                               DECIMAL(10,0),
  SCHEDULEDEND                               DATETIME2,
  STATECODE                                  DECIMAL(10,0),
  STATUSCODE                                 DECIMAL(10,0),
  MODIFIEDON                                 DATETIME2,
  ASC_DATEACCEPTANCERECEIVED                 DATETIME2,
  ASC_DATEPAYMENTSTAGECOMPLETE               DATETIME2,
  ASC_DURATION                               VARCHAR(100),
  ASC_ISA30DAYSLA                            DATETIME2,
  ASC_ENDTOEND                               DECIMAL(10,0),
  ASC_DATECLOSED                             DATETIME2,
  ASC_PLUGINERRORFIELD                       VARCHAR(MAX),
  ASC_CANCELLEDDATE                          DATETIME2,
  ASC_DATEINFORMATIONREQUESTRECEIVED         DATETIME2,
  ASC_DATEINFORMATIONREQUESTWORKSTARTED      DATETIME2,
  ASC_TOTALWRAPPERAMOUNT                     DECIMAL(19,4),
  ASC_WRAPPER                                DECIMAL(10,0),
  ASC_INFOREQUESTSENT                        DECIMAL(1,0),
  ASC_DATEINFOREQUESTSENT                    DATETIME2,
  ASC_COMPETITOR                             VARCHAR(255),
  ASC_FUNDMANAGER                            VARCHAR(255),
  ASC_INFORMATIONREQUESTSTAGECOMPLETE        DECIMAL(1,0),
  ASC_THIRDPARTYREFERENCE                    VARCHAR(100),
  ASC_CASHTRANSFER                           DECIMAL(10,0),
  ASC_DATEINFORMATIONREQUESTSTAGECOMPLETE    DATETIME2,
  ASC_DATECASHTRANSFERRECEIVED               DATETIME2,
  ASC_DATECASHTRANSFERWORKSTARTED            DATETIME2,
  ASC_CHECKFORCORPORATEACTIONS               DECIMAL(10,0),
  ASC_CHECKUNEXECUTEDORDERS_CASHTRANSFER     DECIMAL(10,0),
  ASC_DIRECTDEBITREMOVED                     DECIMAL(10,0),
  ASC_MODELREMOVED                           DECIMAL(10,0),
  ASC_HOLDINGSSOLD                           DECIMAL(10,0),
  ASC_DATEHOLDINGSSOLD                       DATETIME2,
  ASC_CASHTRANSFERSTAGECOMPLETE              DECIMAL(1,0),
  ASC_DATECASHTRANSFERSTAGECOMPLETE          DATETIME2,
  ASC_CHECKEDDATECASHTRANSFER                DATETIME2,
  ASC_TOAPROCESSSTAGE                        VARCHAR(1000),
  ASC_CASHTRANSFERCHECKED                    DECIMAL(1,0),
  ASC_CASHTRANSFECHECKEDBY                   VARCHAR(255),
  ASC_CASHTRANSFECHECKEDBYNAME               VARCHAR(200),
  ASC_DATEACCEPTANCERECEIVED                 DATETIME2,
  ASC_DATEACCEPTANCEWORKSTARTED              DATETIME2,
  ASC_CHECKFORCORPORATEACTIONS_ACCEPTANCE    DECIMAL(10,0),
  ASC_CHECKUNEXECUTEDORDERS_ACCEPTANCE       DECIMAL(10,0),
  ASC_DIRECTDEBITREMOVED_ACCEPTANCE          DECIMAL(10,0),
  ASC_MODELREMOVED_ACCEPTANCE                DECIMAL(10,0),
  ASC_STFSGENERATED                          DECIMAL(10,0),
  ASC_DATESTFSGENERATED                      DATETIME2,
  ASC_DATESTFSSENT                           DATETIME2,
  ASC_ACCEPTANCECHECKEDBY                    VARCHAR(255),
  ASC_ACCEPTANCECHECKEDBYNAME                VARCHAR(200),
  ASC_ACCEPTANCESTAGECOMPLETE                DECIMAL(1,0),
  ASC_DATEACCEPTANCESTAGECOMPLETE            DATETIME2,
  ASC_DATEPAYMENTWORKSTARTED                 DATETIME2,
  ASC_ADVISORCHARGESTAKENOFF                 DECIMAL(10,0),
  ASC_REFERREDTOFEESANDCHARGES               DECIMAL(10,0),
  ASC_DATEREFERREDTOFEESCHARGES              DATETIME2,
  ASC_RUNTRANSFERWIZARD                      DECIMAL(1,0),
  ASC_AMOUNTPAID                             DECIMAL(19,4),
  ASC_METHODOFPAYMENT                        DECIMAL(10,0),
  ASC_CHECKEDPAYMENT                         DECIMAL(1,0),
  ASC_CHECKEDDATEPAYMENT                     DATETIME2,
  ASC_PAYMENTCHECKEDBY                       VARCHAR(255),
  ASC_PAYMENTCHECKEDBYNAME                   VARCHAR(255),
  ASC_TRANSFERCONFIRMATIONSENT               DECIMAL(1,0),
  ASC_TRANSFERCONFIRMATIONSENTDATE           DATETIME2,
  ASC_PAYMENTSTAGECOMPLETE                   DECIMAL(1,0),
  ASC_DATEPAYMENTSTAGECOMPLETE               DATETIME2 
);

ALTER TABLE STAGE_CDI.CRM_PLAT_DYN_TRANSFEROUT_STG 
  ADD CONSTRAINT DF_CRM_PLAT_DYN_TRANSFEROUT_STG_S_CREATE_DATETIME DEFAULT CAST(SYSDATETIMEOFFSET() AT TIME ZONE 'GMT Standard Time' AS DATETIME2) FOR S_CREATE_DATETIME; 

ALTER TABLE STAGE_CDI.CRM_PLAT_DYN_TRANSFEROUT_STG 
  ADD CONSTRAINT DF_CRM_PLAT_DYN_TRANSFEROUT_STG_S_UPDATE_DATETIME DEFAULT CAST(SYSDATETIMEOFFSET() AT TIME ZONE 'GMT Standard Time' AS DATETIME2) FOR S_UPDATE_DATETIME; 